webpackJsonp([10],{"89JU":function(e,t,o){"use strict";function a(e){o("hG9m")}Object.defineProperty(t,"__esModule",{value:!0});var r=o("1h8J"),s=["周一","周二","周三","周四","周五","周六","周日"],n={data:function(){return{qzdateArr:[],weeks:s,times:[],hotelGoods:{hotelId:"",id:"",roomtypeId:"",description:"",breakfast:"",cancel:"",cancelTime:"",confirm:"",confirmTime:"",price:"",checkWeeks:[],type:"",basicPrice:"",creator:"",special:0,priceRuleList:[]},startTime:"",endTime:"",type:"1",cooperateType:0,brokerage:"",brokerageProportion:"",ruleData:[{weekStart:1,week:"星期一",price:"",basicPrice:""},{weekStart:2,week:"星期二",price:"",basicPrice:""},{weekStart:3,week:"星期三",price:"",basicPrice:""},{weekStart:4,week:"星期四",price:"",basicPrice:""},{weekStart:5,week:"星期五",price:"",basicPrice:""},{weekStart:6,week:"星期六",price:"",basicPrice:""},{weekStart:7,week:"星期日",price:"",basicPrice:""}],rules:{roomtypeId:[{required:!0,message:"请选择房型",trigger:"blur"}],breakfast:[{required:!0,message:"请选择",trigger:"blur"}],cancel:[{required:!0,message:"请选择",trigger:"blur"}],confirm:[{required:!0,message:"请选择",trigger:"blur"}],checkWeeks:[{type:"array",required:!0,message:"请输入至少一个星期",trigger:"blur"}],price:[{required:!0,message:"请输入执行价格",trigger:"blur"}],type:[{required:!0,message:"请选择",trigger:"blur"}],special:[{required:!0,message:"请选择",trigger:"blur"}]},roomtypeList:[]}},created:function(){this.initData(),this.qzdateArr=[{qzdatetime:""}]},methods:{addDate:function(){this.qzdateArr.push({qzdatetime:""})},redDate:function(e){this.qzdateArr.splice(e,1)},initData:function(){var e=this;this.hotelGoods.hotelId=this.$store.state.hotelId,this.hotelGoods.creator=this.$store.state.user.nickName,Object(r.O)(this.hotelGoods.hotelId).then(function(t){1===t.data.state?e.roomtypeList=t.data.data:e.$message({type:"error",message:"获取失败"})}).catch(function(e){return console.log(e)})},transfToNumFn:function(e){switch(e){case"周一":return"1";case"周二":return"2";case"周三":return"3";case"周四":return"4";case"周五":return"5";case"周六":return"6";case"周日":return"7"}},submitForm:function(e){var t=this;this.$refs[e].validate(function(o){if(!o)return!1;if("2"!==t.type&&""===t.hotelGoods.price)return void t.$message({type:"error",message:"请输入价格"});var a={};if(0===t.hotelGoods.special)if("3"===t.type){for(var s=0;s<t.qzdateArr.length;s++){var n={start:Date.parse(t.qzdateArr[s].qzdatetime[0]),end:Date.parse(t.qzdateArr[s].qzdatetime[1])};t.times.push(n)}a.price=t.hotelGoods.price;for(var i=0;i<t.hotelGoods.checkWeeks.length;i++)t.hotelGoods.checkWeeks[i]=t.transfToNumFn(t.hotelGoods.checkWeeks[i]);a.weeks=t.hotelGoods.checkWeeks.join(""),a.times=t.times,a.rtype=t.type,t.hotelGoods.map=a}else{a.price=t.hotelGoods.price;for(var l=0;l<t.hotelGoods.checkWeeks.length;l++)t.hotelGoods.checkWeeks[l]=t.transfToNumFn(t.hotelGoods.checkWeeks[l]);a.weeks=t.hotelGoods.checkWeeks.join(""),a.rtype=t.type,t.hotelGoods.map=a}else t.type="1",a.rtype=t.type,t.hotelGoods.map=a;Object(r.b)(t.hotelGoods).then(function(o){if(1===o.data.state){t.$refs[e].resetFields(),t.hotelGoods.special=0,t.hotelGoods.checkWeeks=[],t.type="1";for(var a in t.ruleData)t.ruleData[a].price="",t.ruleData[a].basicPrice="";t.$message({type:"success",message:"保存成功"})}else t.$message({type:"error",message:"保存失败"})})})},changePrice:function(){0===this.cooperateType?this.hotelGoods.price=(parseFloat(this.hotelGoods.basicPrice)+parseFloat(this.brokerage)).toFixed(2):1===this.cooperateType&&(this.hotelGoods.price=(this.hotelGoods.basicPrice*(1+parseFloat(this.brokerageProportion.replace("%","")))).toFixed(2))},changebasicPrice:function(){0===this.cooperateType?this.hotelGoods.basicPrice=(parseFloat(this.hotelGoods.price)-parseFloat(this.brokerage)).toFixed(2):1===this.cooperateType&&(this.hotelGoods.basicPrice=(this.hotelGoods.price/(1+parseFloat(this.brokerageProportion.replace("%","")))).toFixed(2))},change:function(){for(var e in this.roomtypeList)this.roomtypeList[e].id===this.hotelGoods.roomtypeId&&(this.cooperateType=this.roomtypeList[e].cooperateType,this.brokerageProportion=this.roomtypeList[e].brokerageProportion,this.brokerage=this.roomtypeList[e].brokerage);this.hotelGoods.price="",this.hotelGoods.basicPrice="";for(var t in this.ruleData)this.ruleData[t].price="",this.ruleData[t].basicPrice=""},changePriceWeek:function(e){for(var t in this.ruleData)this.ruleData[t].weekStart===e&&(0===this.cooperateType?this.ruleData[t].price=(parseFloat(this.ruleData[t].basicPrice)+parseFloat(this.brokerage)).toFixed(2):1===this.cooperateType&&(this.ruleData[t].price=(parseFloat(this.ruleData[t].basicPrice)*(1+parseFloat(this.brokerageProportion.replace("%","")))).toFixed(2)))},changebasicPriceWeek:function(e){for(var t in this.ruleData)this.ruleData[t].weekStart===e&&(0===this.cooperateType?this.ruleData[t].basicPrice=(parseFloat(this.ruleData[t].price)-parseFloat(this.brokerage)).toFixed(2):1===this.cooperateType&&(this.ruleData[t].basicPrice=(parseFloat(this.ruleData[t].price)/(1+parseFloat(this.brokerageProportion.replace("%","")))).toFixed(2)))}}},i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"hotel-goods-add"},[e._m(0),e._v(" "),o("el-form",{ref:"hotelGoods",attrs:{model:e.hotelGoods,rules:e.rules,"label-width":"150px",inline:!0}},[o("el-row",[o("el-col",{attrs:{span:20}},[o("el-form-item",{attrs:{prop:"roomtypeId",label:"基础房型"}},[o("el-select",{on:{change:e.change},model:{value:e.hotelGoods.roomtypeId,callback:function(t){e.$set(e.hotelGoods,"roomtypeId",t)},expression:"hotelGoods.roomtypeId"}},e._l(e.roomtypeList,function(e){return o("el-option",{key:e.id,attrs:{label:e.apartmentName,value:e.id}})}))],1)],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:20}},[o("el-form-item",{attrs:{prop:"description",label:"售卖描述"}},[o("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"60字以内，非必填"},model:{value:e.hotelGoods.description,callback:function(t){e.$set(e.hotelGoods,"description",t)},expression:"hotelGoods.description"}})],1)],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{prop:"breakfast",label:"是否含早"}},[o("el-radio-group",{model:{value:e.hotelGoods.breakfast,callback:function(t){e.$set(e.hotelGoods,"breakfast",t)},expression:"hotelGoods.breakfast"}},[o("el-radio",{attrs:{label:1}},[e._v("双早")]),e._v(" "),o("el-radio",{attrs:{label:2}},[e._v("单早")]),e._v(" "),o("el-radio",{attrs:{label:0}},[e._v("无")])],1)],1)],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:24}},[o("el-form-item",{attrs:{prop:"cancel",label:"取消政策"}},[o("el-radio-group",{model:{value:e.hotelGoods.cancel,callback:function(t){e.$set(e.hotelGoods,"cancel",t)},expression:"hotelGoods.cancel"}},[o("el-radio",{attrs:{label:1}},[e._v("随时")]),e._v(" "),o("el-radio",{attrs:{label:0}},[e._v("不能取消")]),e._v(" "),o("el-radio",{attrs:{label:2}},[e._v("入住前")])],1)],1),e._v(" "),o("el-form-item",[o("el-input",{directives:[{name:"show",rawName:"v-show",value:2===e.hotelGoods.cancel,expression:"hotelGoods.cancel === 2"}],model:{value:e.hotelGoods.cancelTime,callback:function(t){e.$set(e.hotelGoods,"cancelTime",t)},expression:"hotelGoods.cancelTime"}},[o("template",{slot:"append"},[e._v("小时可取消")])],2)],1)],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:24}},[o("el-form-item",{attrs:{prop:"confirm",label:"确认时间"}},[o("el-radio-group",{model:{value:e.hotelGoods.confirm,callback:function(t){e.$set(e.hotelGoods,"confirm",t)},expression:"hotelGoods.confirm"}},[o("el-radio",{attrs:{label:1}},[e._v("付款自动确认")]),e._v(" "),o("el-radio",{attrs:{label:2}},[e._v("30分钟内确认")]),e._v(" "),o("el-radio",{attrs:{label:0}},[e._v("自定义")])],1)],1),e._v(" "),o("el-form-item",[o("el-input",{directives:[{name:"show",rawName:"v-show",value:0===e.hotelGoods.confirm,expression:"hotelGoods.confirm === 0"}],model:{value:e.hotelGoods.confirmTime,callback:function(t){e.$set(e.hotelGoods,"confirmTime",t)},expression:"hotelGoods.confirmTime"}},[o("template",{slot:"append"},[e._v("小时内确认")])],2)],1)],1)],1),e._v(" "),o("div",{staticClass:"separe"}),e._v(" "),o("div",{staticClass:"biaoti"},[e._v("价格信息")]),e._v(" "),o("el-row",{directives:[{name:"show",rawName:"v-show",value:0===e.hotelGoods.special,expression:"hotelGoods.special === 0"}]},[o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"适用时间"}},[o("el-radio-group",{model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[o("el-radio",{attrs:{label:"1"}},[e._v("所有日期")]),e._v(" "),o("el-radio",{attrs:{label:"3"}},[e._v("按时间段")])],1)],1)],1),e._v(" "),o("el-col",{attrs:{span:12}},[o("div",{directives:[{name:"show",rawName:"v-show",value:"3"===e.type,expression:"type === '3'"}]},[o("el-row",[o("el-col",{staticStyle:{position:"relative"},attrs:{span:15}},[e._l(e.qzdateArr,function(t,a){return o("el-date-picker",{key:a,staticStyle:{height:"40px","margin-bottom":"8px"},attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.qzdatetime,callback:function(o){e.$set(t,"qzdatetime",o)},expression:"item.qzdatetime"}})}),e._v(" "),o("span",{staticClass:"add",staticStyle:{position:"absolute",top:"0",right:"-50px"}},[o("i",{staticClass:"el-icon-circle-plus-outline",on:{click:e.addDate}})])],2),e._v(" "),o("el-col",{attrs:{span:1}},e._l(e.qzdateArr.length,function(t,a){return o("span",[a>0?o("i",{staticClass:"el-icon-remove-outline",staticStyle:{"margin-left":"20px"},on:{click:function(t){e.redDate(a)}}}):o("i")])}))],1)],1)])],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:24}},[o("el-form-item",{attrs:{prop:"checkWeeks",label:"适用星期"}},[o("el-checkbox-group",{model:{value:e.hotelGoods.checkWeeks,callback:function(t){e.$set(e.hotelGoods,"checkWeeks",t)},expression:"hotelGoods.checkWeeks"}},e._l(e.weeks,function(t){return o("el-checkbox",{key:t,attrs:{label:t}},[e._v(e._s(t))])}))],1)],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{prop:"price",label:"执行价格"}},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.hotelGoods.price,expression:"hotelGoods.price"}],domProps:{value:e.hotelGoods.price},on:{input:function(t){t.target.composing||e.$set(e.hotelGoods,"price",t.target.value)}}}),e._v("元/间夜\n          ")])],1)],1)],1),e._v(" "),o("el-row",[o("el-col",[o("button",{staticClass:"submit",on:{click:function(t){e.submitForm("hotelGoods")}}},[e._v("提交")])])],1)],1)},l=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("header",[e._v("新增售卖规则"),o("span",{staticClass:"text"},[e._v("("),o("span",[e._v("*")]),e._v("此为必填项)")])])}],d={render:i,staticRenderFns:l},c=d,p=o("Z0/y"),h=a,A=p(n,c,!1,h,"data-v-28759395",null);t.default=A.exports},hG9m:function(e,t,o){var a=o("pYYd");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);o("FIqI")("5d0805d8",a,!0,{})},pYYd:function(e,t,o){t=e.exports=o("UTlt")(!0),t.push([e.i,"\n.allcover[data-v-28759395] {\n  position: absolute;\n  top: 0;\n  right: 0;\n}\n.ctt[data-v-28759395] {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n}\n.tb[data-v-28759395] {\n  position: absolute;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n          transform: translateY(-50%);\n}\n.lr[data-v-28759395] {\n  position: absolute;\n  left: 50%;\n  -webkit-transform: translateX(-50%);\n          transform: translateX(-50%);\n}\n.ellipsis[data-v-28759395] {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.margin[data-v-28759395] {\n  margin: 0 auto;\n}\n.left[data-v-28759395] {\n  float: left;\n}\n.right[data-v-28759395] {\n  float: right;\n}\n.hide[data-v-28759395] {\n  display: none;\n}\n.show[data-v-28759395] {\n  display: block;\n}\ninput[data-v-28759395] {\n  height: 30px;\n  margin: 5px;\n  border: 1px solid #E4E7EC;\n  border-radius: 3px;\n}\n.separe[data-v-28759395],\n.biaoti[data-v-28759395] {\n  width: 90%;\n  margin: 8px auto;\n  color: #6C6A6A;\n}\n.separe[data-v-28759395] {\n  border-bottom: 2px dashed #BBBBBB;\n}\n.el-row i[data-v-28759395] {\n  display: inline-block;\n  height: 40px;\n  line-height: 40px;\n  margin-bottom: 8px;\n  font-size: 28px;\n  color: #616060;\n  vertical-align: middle;\n  cursor: pointer;\n}\n.hotel-goods-add[data-v-28759395] {\n  padding: 30px 33px 100px 30px;\n  background-color: #fff;\n}\n.hotel-goods-add header[data-v-28759395] {\n  line-height: 50px;\n  font-size: 20px;\n  color: #4c4c4c;\n}\n.hotel-goods-add header span.text[data-v-28759395] {\n  font-size: 15px;\n  color: #4c4c4c;\n}\n.hotel-goods-add header span.text span[data-v-28759395] {\n  color: red;\n}\n.hotel-goods-add button.submit[data-v-28759395] {\n  display: block;\n  margin: 0 auto;\n  border-radius: 3px;\n  margin-top: 60px;\n  width: 200px;\n  height: 40px;\n  line-height: 40px;\n  background-color: #3797db;\n  font-size: 20px;\n  color: #fff;\n  text-align: center;\n}\n.hotel-goods-add table[data-v-28759395] {\n  width: 100%;\n  padding-left: 22px;\n}\n.hotel-goods-add td[data-v-28759395] {\n  width: 28%;\n}\n.hotel-goods-add .map[data-v-28759395] {\n  width: 100%;\n  height: 300px;\n}\n","",{version:3,sources:["D:/SVNProject/hotel/src/pages/price/hotelGoodsAdd.vue"],names:[],mappings:";AACA;EACE,mBAAmB;EACnB,OAAO;EACP,SAAS;CACV;AACD;EACE,mBAAmB;EACnB,SAAS;EACT,UAAU;EACV,yCAAyC;UACjC,iCAAiC;CAC1C;AACD;EACE,mBAAmB;EACnB,SAAS;EACT,oCAAoC;UAC5B,4BAA4B;CACrC;AACD;EACE,mBAAmB;EACnB,UAAU;EACV,oCAAoC;UAC5B,4BAA4B;CACrC;AACD;EACE,iBAAiB;EACjB,wBAAwB;EACxB,oBAAoB;CACrB;AACD;EACE,eAAe;CAChB;AACD;EACE,YAAY;CACb;AACD;EACE,aAAa;CACd;AACD;EACE,cAAc;CACf;AACD;EACE,eAAe;CAChB;AACD;EACE,aAAa;EACb,YAAY;EACZ,0BAA0B;EAC1B,mBAAmB;CACpB;AACD;;EAEE,WAAW;EACX,iBAAiB;EACjB,eAAe;CAChB;AACD;EACE,kCAAkC;CACnC;AACD;EACE,sBAAsB;EACtB,aAAa;EACb,kBAAkB;EAClB,mBAAmB;EACnB,gBAAgB;EAChB,eAAe;EACf,uBAAuB;EACvB,gBAAgB;CACjB;AACD;EACE,8BAA8B;EAC9B,uBAAuB;CACxB;AACD;EACE,kBAAkB;EAClB,gBAAgB;EAChB,eAAe;CAChB;AACD;EACE,gBAAgB;EAChB,eAAe;CAChB;AACD;EACE,WAAW;CACZ;AACD;EACE,eAAe;EACf,eAAe;EACf,mBAAmB;EACnB,iBAAiB;EACjB,aAAa;EACb,aAAa;EACb,kBAAkB;EAClB,0BAA0B;EAC1B,gBAAgB;EAChB,YAAY;EACZ,mBAAmB;CACpB;AACD;EACE,YAAY;EACZ,mBAAmB;CACpB;AACD;EACE,WAAW;CACZ;AACD;EACE,YAAY;EACZ,cAAc;CACf",file:"hotelGoodsAdd.vue",sourcesContent:["\n.allcover[data-v-28759395] {\n  position: absolute;\n  top: 0;\n  right: 0;\n}\n.ctt[data-v-28759395] {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n}\n.tb[data-v-28759395] {\n  position: absolute;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n          transform: translateY(-50%);\n}\n.lr[data-v-28759395] {\n  position: absolute;\n  left: 50%;\n  -webkit-transform: translateX(-50%);\n          transform: translateX(-50%);\n}\n.ellipsis[data-v-28759395] {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.margin[data-v-28759395] {\n  margin: 0 auto;\n}\n.left[data-v-28759395] {\n  float: left;\n}\n.right[data-v-28759395] {\n  float: right;\n}\n.hide[data-v-28759395] {\n  display: none;\n}\n.show[data-v-28759395] {\n  display: block;\n}\ninput[data-v-28759395] {\n  height: 30px;\n  margin: 5px;\n  border: 1px solid #E4E7EC;\n  border-radius: 3px;\n}\n.separe[data-v-28759395],\n.biaoti[data-v-28759395] {\n  width: 90%;\n  margin: 8px auto;\n  color: #6C6A6A;\n}\n.separe[data-v-28759395] {\n  border-bottom: 2px dashed #BBBBBB;\n}\n.el-row i[data-v-28759395] {\n  display: inline-block;\n  height: 40px;\n  line-height: 40px;\n  margin-bottom: 8px;\n  font-size: 28px;\n  color: #616060;\n  vertical-align: middle;\n  cursor: pointer;\n}\n.hotel-goods-add[data-v-28759395] {\n  padding: 30px 33px 100px 30px;\n  background-color: #fff;\n}\n.hotel-goods-add header[data-v-28759395] {\n  line-height: 50px;\n  font-size: 20px;\n  color: #4c4c4c;\n}\n.hotel-goods-add header span.text[data-v-28759395] {\n  font-size: 15px;\n  color: #4c4c4c;\n}\n.hotel-goods-add header span.text span[data-v-28759395] {\n  color: red;\n}\n.hotel-goods-add button.submit[data-v-28759395] {\n  display: block;\n  margin: 0 auto;\n  border-radius: 3px;\n  margin-top: 60px;\n  width: 200px;\n  height: 40px;\n  line-height: 40px;\n  background-color: #3797db;\n  font-size: 20px;\n  color: #fff;\n  text-align: center;\n}\n.hotel-goods-add table[data-v-28759395] {\n  width: 100%;\n  padding-left: 22px;\n}\n.hotel-goods-add td[data-v-28759395] {\n  width: 28%;\n}\n.hotel-goods-add .map[data-v-28759395] {\n  width: 100%;\n  height: 300px;\n}\n"],sourceRoot:""}])}});
//# sourceMappingURL=10.f0338b59573afa5eb606.js.map